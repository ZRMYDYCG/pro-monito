#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è®¾ç½® PATH ä»¥åŒ…å« node å’Œ pnpm
export PATH="/usr/local/bin:$PATH"

if git diff HEAD@{1} --name-only | grep -q "^package-lock.json\|^yarn.lock\|^pnpm-lock.yaml"; then
  echo "ğŸ“¦ æ£€æµ‹åˆ°ä¾èµ–æ–‡ä»¶æœ‰æ›´æ–°ï¼Œæ­£åœ¨å®‰è£…æ–°çš„ä¾èµ–..."
  if command -v pnpm >/dev/null 2>&1; then
    pnpm install
  else
    echo "âš ï¸ pnpm å‘½ä»¤ä¸å¯ç”¨ï¼Œè¯·æ‰‹åŠ¨è¿è¡Œ pnpm install"
  fi
fi


if git diff HEAD@{1} --name-only | grep -q "^.env\|^.env.*\|^config/"; then
  echo "âš™ï¸ æ£€æµ‹åˆ°é…ç½®æ–‡ä»¶æœ‰æ›´æ–°ï¼Œè¯·æ£€æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°æœ¬åœ°é…ç½®"
fi